<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- ✅ Updated CSP: allow fonts -->
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self'; style-src 'self' https://unpkg.com https://cdn.jsdelivr.net; font-src 'self' https://cdn.jsdelivr.net; script-src 'self'"
    />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="../styles/mailassistant.css" />

    <!-- ✅ Bootstrap Icons -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"
    />
    <title>Desk Flow - Automation Application</title>
  </head>
  <body>
    <nav class="sidebar close">
      <header>
        <div class="image-text">
          <span class="image">
            <img src="../images/DeskFlow-Logo2.png" alt="logo" />
          </span>

          <div class="text header-text">
            <span class="name">Automation App</span>
          </div>
        </div>

        <i class="bi bi-chevron-right toggle"></i>
      </header>
      
      <div class="menu-bar">
       <div class="menu">
         <h2 class="title nav-text">AUTOMATE</h2>
        <ul class="menu-links">
         <li class="nav-link">
          <a href="../pages/timetracker.html">
           <i class="bi bi-stopwatch icon"></i>
           <span class="text nav-text">Time Tracker</span>
          </a>
         </li>
         <li class="nav-link">
          <a href="../pages/mailassistant.html">
           <i class="bi bi-envelope-paper icon"></i>
           <span class="text nav-text">Mail Assitant</span>
          </a>
         </li>
         <li class="nav-link">
          <div class="dropdown">
           <a href="#" id="dropdownBtn" class="text nav-text dropbtn" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            <i class="bi bi-magic icon"></i>
            <span class="text nav-text">Quick Actions</span>
           </a>
           <div id="myDropdown" class="dropdown-content">
             <a href="../pages/quickdelete.html">Quick Delete</a>
             <a href="../pages/quicksearch.html">Quick Search</a>
             <a href="../pages/fileorganizer.html">File Organizer</a>
           </div>
          </div>
         </li>
        </ul>
       </div>
       <div class="menu">
         <h2 class="title nav-text">ANALYZE</h2>
        <ul class="menu-links">
         <li class="nav-link">
          <a href="../pages/home.html">
           <i class="bi bi-clipboard2-data icon"></i>
           <span class="text nav-text">Dashboard</span>
          </a>
         </li>
        
        </ul>
       </div>
       <div class="menu">
         <h2 class="title nav-text">MANAGE</h2>
        <ul class="menu-links">
         <li class="nav-link">
          <a href="../pages/home.html">
           <i class="bi bi-info-square icon"></i>
           <span class="text nav-text">Tutorial</span>
          </a>
         </li>
         <li class="nav-link">
          <a href="../pages/settings.html">
           <i class="bi bi-gear-wide-connected icon"></i>
           <span class="text nav-text">Settings</span>
          </a>
         </li>
        </ul>
       </div>
       <div .bottom-content>
         <li class="nav-link">
          <a href="../pages/settings.html">
           <i class="bi bi-person-add icon"></i>
           <span class="text nav-text">Create Account</span>
          </a>
         </li>

         <li class="mode">
          <div class="moon-sun">
           <i class="bi bi-moon icon moon"></i>
           <i class="bi bi-brightness-high icon sun"></i>
          </div>
          <span class="mode-text text nav-text">Dark Mode</span>
          <div class="toggle-switch">
           <span class="switch"></span>
          </div>
         </li>
        </ul>
       </div>
    </nav> 

    <section class="home">
     <div class="text">Mail Assitant</div>
     <div class="mail-container">
      <h4>Lets you fetch, read, and send Gmail messages directly from your desktop — with an AI-powered reply generator to help you craft responses faster.</h4>
      <div class="fetch-container">
        <div class="fetch-top">
          <h3>Inbox</h3>
          <button id="fetchEmailsBtn">
            <i class="bi bi-envelope-plus"></i> Fetch Emails
          </button>
        </div>

        <!-- Header for fetched messages -->
        <div id="emailHeader" class="email-header"></div>

        <!-- List of fetched emails -->
        <div id="emailOutput">
          <div id="emailList"></div>
        </div>
      </div>
      <hr>
      <div class="send-container">
       <div class="send-message">
         <h4>New Message</h4>
         <div class="top-send">
          <input id="to" placeholder="Recipient Email">
          <input id="subject" placeholder="Subject">
         </div>
         <div class="bottom-send">
          <textarea id="body" placeholder="Body"></textarea>
          <button id="sendEmailBtn">Send Email</button>
         </div>
         <div id="statusMessage"></div>
        </div>
        <div class="generate-message">

        </div>
      </div>
     </div>
    </section>

    <script src="../scripts/mailAssistantRenderer.js"></script>
  </body>
</html>
